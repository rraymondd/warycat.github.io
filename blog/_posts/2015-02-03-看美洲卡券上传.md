---
layout: default_cn
---

<section class='container'>
<h3>电子卡券上传</h3>
<div class="row control-group">
    <div class="form-group col-md-2 floating-label-form-group controls">
        <label>卡券</label>
        <input id="id" type="text" class="form-control" placeholder="ush802015" value="ush802015">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>
    <div class="form-group col-md-2 floating-label-form-group controls">
        <label>日期</label>
        <input id="date" type="tel" class="form-control" placeholder="MMDD" value="">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>

    <div class="form-group col-md-1 floating-label-form-group controls">
        <label>数量</label>
        <input id="quantity" type="tel" class="form-control" placeholder="26" value="26">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div class="form-group col-md-3 floating-label-form-group controls">
        <label>密码</label>
        <input id="password" type="password" class="form-control" placeholder="" value="">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div class="form-group col-md-3 floating-label-form-group controls">
        <label>上传</label>
		<button id="upload" class='btn btn-block btn-primary form-control'>2015年环球影城好莱坞特价票$80</button>
	</div>
</div>
</section>

<script>
	$('#upload').click(function(){
		var id = $('#id').val();
		var date = $('#date').val();
		var quantity = $('#quantity').val();
		var password = $('#password').val();
		if(!(id && date && quantity && password)){
			alert('missing field');
			return;
		}
		var files = [];
		for(var i = 1;i<=quantity;i++){
			var file = id+date+i+'.pdf';
			files.push(file);
			console.log(file);
		}
		var item = {id:'ush802015',files:files,password:password};
		console.log(item);
		$.ajax({
		    type: "POST",
		    url: "https://008.io/transaction/uploadTickets",
		    // The key needs to match your method's input parameter (case-sensitive).
		    data: JSON.stringify(item),
		    success: function(data){alert(data);},
		    failure: function(errMsg) {
		        alert(errMsg);
		    }
		});
	});

</script>