---
layout: default_cn
---

<section class='container'>
<h3>电子卡券创建</h3>
<div id="create" class="row control-group">
    <div id="id" class="form-group col-md-2 floating-label-form-group controls">
        <label>卡券</label>
        <input type="text" class="form-control" value="ush802015">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>
    <div id="originalPrice" class="form-group col-md-1 floating-label-form-group controls">
        <label>原价</label>
        <input type="tel" class="form-control" value="92">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>
    <div id="discountedPrice" class="form-group col-md-1 floating-label-form-group controls">
        <label>售价</label>
        <input type="tel" class="form-control" value="80">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div id="splitPrice" class="form-group col-md-1 floating-label-form-group controls">
        <label>分账</label>
        <input type="tel" class="form-control" value="5">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div id="password" class="form-group col-md-3 floating-label-form-group controls">
        <label>密码</label>
        <input  type="password" class="form-control" value="">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div id="submit" class="form-group col-md-2 floating-label-form-group controls">
        <label>创建</label>
		<button id="upload" class='btn btn-block btn-primary form-control'>创建</button>
	</div>
</div>


<h3>电子卡券上传</h3>
<div id="upload" class="row control-group">
    <div id="id" class="form-group col-md-2 floating-label-form-group controls">
        <label>卡券</label>
        <input type="text" class="form-control" placeholder="ush802015" value="ush802015">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>
    <div id="date" class="form-group col-md-2 floating-label-form-group controls">
        <label>日期</label>
        <input type="tel" class="form-control" placeholder="MMDD" value="">
        <div name="isRequired" class="text-danger tidy">必填</div>
    </div>
    <div id="quantity" class="form-group col-md-1 floating-label-form-group controls">
        <label>数量</label>
        <input type="tel" class="form-control" placeholder="26" value="26">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div id="password" class="form-group col-md-3 floating-label-form-group controls">
        <label>密码</label>
        <input type="password" class="form-control" placeholder="" value="">
        <div name="isRequired" class="text-danger tidy">必填</div>
	</div>
    <div id="submit" class="form-group col-md-3 floating-label-form-group controls">
        <label>上传</label>
		<button class='btn btn-block btn-primary form-control'>2015年环球影城好莱坞特价票$80</button>
	</div>
</div>
</section>

<script>

$('#create > #submit > button').click(function(){
	var id = $('#create > #id > input').val();
	var originalPrice = $('#create > #originalPrice > input').val();
	var discountedPrice = $('#create > #discountedPrice > input').val();
	var splitPrice = $('#create > #splitPrice > input').val();
	var password = $('#create > #password > input').val();
	if(! (id && originalPrice && discountedPrice && splitPrice && password)){
		alert('missing field');
		return;
	}
	var item = {id:id,originalPrice:originalPrice,discountedPrice:discountedPrice,splitPrice:splitPrice,password:password};
	console.log(item);
	$.ajax({
	    type: "POST",
	    url: "https://008.io/product/createTicket",
	    data: JSON.stringify(item),
	    success: function(data){alert(JSON.stringify(data));},
	    failure: function(errMsg) {
	        alert(JSON.stringify(errMsg));
	    }
	});
});

$('#upload > #submit > button').click(function(){
	var id = $('#upload > #id > input').val();
	var date = $('#upload > #date > input').val();
	var quantity = $('#upload > #quantity > input').val();
	var password = $('#upload > #password > input').val();
	if(!(id && date && quantity && password)){
		alert('missing field');
		return;
	}
	var files = [];
	for(var i = 1;i<=quantity;i++){
		var file = id+date+i+'.pdf';
		files.push(file);
		console.log(file);
	}
	var item = {id:id,files:files,password:password};
	console.log(item);
	$.ajax({
	    type: "POST",
	    url: "https://008.io/transaction/uploadTickets",
	    // The key needs to match your method's input parameter (case-sensitive).
	    data: JSON.stringify(item),
	    success: function(data){alert(JSON.stringify(data));},
	    failure: function(errMsg) {
	        alert(JSON.stringify(errMsg));
	    }
	});
});

</script>